#!/usr/bin/env nodejs

/* Run with:

    npx babel-node bin/get-status -b bluesky-aws
    npx babel-node inspect bin/get-status -b bluesky-aws

*/

const commander = require('commander');

const status = require('../lib/status')

function parseArgs () {
    commander
      .version('0.0.1', '-v, --version')
      .usage('[OPTIONS]...')
      .requiredOption('-b, --bucket <bucket>', 's3 bucket')
      .parse(process.argv);
}

//async function go(){
function go() {
    // let s = await status.getRequestStatus(
    //     commander.bucket, 'emissions-request-20200114');
    // console.log(s)
    status.getRequestStatus(
        commander.bucket, 'emissions-request-20200114')
        .then(status => {
            console.log('status: ' + status);
        })
        .catch(err => {
            console.log('Failed to get status: ' + err);
        });
}

parseArgs()
go()
